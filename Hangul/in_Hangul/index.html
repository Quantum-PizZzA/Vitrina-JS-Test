<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Чтение файла</title>
  </head>

  <details>
    <summary>Задача:</summary>
    <pre>
        загрузить числа в формате хангуя в LocalStrage
        </pre>
  </details>

  <body>
    <input type="file" id="file">
    <button id="read">Чтение файла</button>

    <td>
      <button id="dell">dellall</button>
    </td>
    <tr>

      <p id="kol" style="word-break: break-all">0
      </p>

      </form>

      <!-- <script src="javascript/body.js"></script> -->

      <script src="DECRYPT.JS"></script>
      <script src="ENCRYPT.JS"></script>

      <script>

        //обработка файла
        document.querySelector("#read").addEventListener("click", function Text() {
          let file = document.getElementById("file").files[0];

          let reader = new FileReader();

          reader.readAsText(file);

          block_4 = "";
          hengul = "";
          j = 1;
          keyLS = 0;


          reader.onload = function () {
            for (i = 0; i < reader.result.length; i++, j++) {
              block_4 += reader.result[i];
              if (j == 4) {
                keyLS++;

                //4 блок 
                x = encript(block_4);
                //쵑 хангулина
                y = String.fromCharCode(encript(x));
                hengul = hengul + y;
                //decript - 44773
                // z = y.charCodeAt();
                // декодирование числа из числа
                // f = decript(z);

                j = 0;
                block_4 = "";

              }
            }
            localStorage.setItem(keyLS * 4, hengul);


            document.getElementById("kol").innerHTML = hengul.length;

            console.log(block_4);

          }
        });



        document.getElementById('dell').onclick = function () {
          localStorage.clear();
        }

      </script>
  </body>

</html>